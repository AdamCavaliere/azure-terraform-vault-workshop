<!DOCTYPE html>
<html>
  <head>
    <title>Private Terraform Enterprise Lab</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <link REL="stylesheet" TYPE="text/css" HREF="style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="link.js"></script>
  </head>
  <body>
    <textarea id="source">
name: Terraforming-Azure-for-Beginners
class: center,middle,title-slide
count: false
count: false
![:scale 80%](images/tfaz.png)
.titletext[
Terraform and Azure  
for Beginners]
Get up and running with Terraform  
on Azure in less than 15 Minutes

???
Welcome to the beginner's guide to Terraform on Azure. 

---
name: Table-of-Contents
class: center,middle
Table of Contents
=========================

.contents[
0. Introduction & Demo
1. Set Up Your Workstation
2. My First Terraform Code
3. Terraform In Action: plan, apply, destroy
4. Organize Your Infrastructure Code
5. Provision and Configure Azure VMs
6. Manage and Change Infrastructure State
7. Terraform Enterprise - Built for Teams and Organizations
]

---
name: Introductions
Introductions
-------------------------
<br><br><br>
.contents[
* Your Name
* Job Title
* Automation Experience
* Favorite Text Editor
]

---
name: How-to-Provision-a-VM
How to Provision an Azure VM
-------------------------
<br><br><br>

Let's look at a few different ways you could provision a new Azure Virtual Machine. Before we start we'll need to gather some basic information including:

.biglist[
1. Virtual Machine Name
1. Operating System (Image)
1. VM Size
1. Geographical Location
1. Username and Password
]

---
name: Azure-Portal-Provision
Method 1: Azure Portal (GUI)
-------------------------
![:scale 100%](images/azure_provision.png)

---
name: Azure-Portal-Provision-2
Method 1: Azure Portal (GUI)
-------------------------
![:scale 100%](images/azure_provision_2.png)

---
name: Azure-Portal-Provision-3
Method 1: Azure Portal (GUI)
-------------------------
![:scale 100%](images/azure_provision_3.png)

---
name: Azure-Resource-Manager
Method 2: Azure Resource Manager (ARM) Template
-------------------------
```json
{
...
"apiVersion": "2017-03-30",
"type": "Microsoft.Compute/virtualMachines",
"name": "[variables('vmName')]",
"location": "[parameters('location')]",
"dependsOn": [
  "[concat('Microsoft.Network/networkInterfaces/', variables('nicName'))]"
],
"properties": {
  "hardwareProfile": {
    "vmSize": "[parameters('virtualMachineSize')]"
  },
  "osProfile": {
    "computerName": "[variables('vmName')]",
    "adminUsername": "[parameters('adminUsername')]",
    "adminPassword": "[parameters('adminPassword')]"
  }
```

ARM templates provide a consistent and reliable way to provision Azure resources. JSON is easy for computers to read, but can be challenging for humans to edit and troubleshoot.

---
name: Provision-with-Terraform
Method 3: Provision with Terraform
-------------------------
![:scale 100%](images/infra_as_code.png)

---
name: Provision-with-Terraform-2
Method 3: Provision with Terraform
-------------------------
![:scale 100%](images/infra_as_code_2.png)

---
name: What-is-Terraform
What is Terraform?
-------------------------

![:scale 100%](./images/azure_tf_code.png)

.contents[
* Executable Documentation
* Human and machine readable
* Easy to learn
* Test, share, re-use, automate
* Works on all major cloud providers
]

???
Terraform is the DNA of your infrastructure.

---
name: IaC
What is Infrastructure as Code?
-------------------------
<br><br><br>
.biglist[
Infrastructure as Code (IaC) is the process of managing and provisioning cloud infrastructure with machine-readable definition files. 

Think of it as executable documentation.
]

---
name: IaC2
Infrastructure as Code Allows Us To...
-------------------------

---
name: IaC2
Infrastructure as Code Allows Us To...
-------------------------
<br><br>
.biglist[
* Provide a codified workflow to create infrastructure
]

---
name: IaC2
Infrastructure as Code Allows Us To...
-------------------------
<br><br>
.biglist[
* Provide a codified workflow to create infrastructure
* Change and update existing infrastructure
]

---
name: IaC2
Infrastructure as Code Allows Us To...
-------------------------
<br><br>
.biglist[
* Provide a codified workflow to create infrastructure
* Change and update existing infrastructure
* Safely test changes using `terraform plan` in dry run mode
]

---
name: IaC2
Infrastructure as Code Allows Us To...
-------------------------
<br><br>
.biglist[
* Provide a codified workflow to create infrastructure
* Change and update existing infrastructure
* Safely test changes using `terraform plan` in dry run mode
* Integrate with application code workflows (Git, Azure DevOps, CI/CD tools)
]

---
name: IaC2
Infrastructure as Code Allows Us To...
-------------------------
<br><br>
.biglist[
* Provide a codified workflow to create infrastructure
* Change and update existing infrastructure
* Safely test changes using `terraform plan` in dry run mode
* Integrate with application code workflows (Git, Azure DevOps, CI/CD tools)
* Provide reusable modules for easy sharing and collaboration
]

---
name: IaC2
Infrastructure as Code Allows Us To...
-------------------------
<br><br>
.biglist[
* Provide a codified workflow to create infrastructure
* Change and update existing infrastructure
* Safely test changes using `terraform plan` in dry run mode
* Integrate with application code workflows (Git, Azure DevOps, CI/CD tools)
* Provide reusable modules for easy sharing and collaboration
* Enforce security policy and organizational standards
]

---
name: IaC2
Infrastructure as Code Allows Us To...
-------------------------
<br><br>
.biglist[
* Provide a codified workflow to create infrastructure
* Change and update existing infrastructure
* Safely test changes using `terraform plan` in dry run mode
* Integrate with application code workflows (Git, Azure DevOps, CI/CD tools)
* Provide reusable modules for easy sharing and collaboration
* Enforce security policy and organizational standards
* Enable collaboration between different teams
]

---
name: IaC-Tools
Other Infrastructure as Code Tools
-------------------------
<br><br>
.center[![:scale 60%](images/infra_tools.png)]

These tools work well for configuring the operating system and application. They are not purpose-built for provisioning cloud infrastructure and platform services.

---
name: Native-Tools
Native Cloud Provisioning Tools
-------------------------
<br><br><br>
.center[![:scale 100%](images/clouds.png)]

Each cloud has its own YAML or JSON based provisioning tool. 

Terraform can be used across *all* major cloud providers and VM hypervisors.

---
Name: Terraform-vs-JSON
Terraform vs. JSON
-------------------------

ARM JSON:
```json
"name": "[concat(parameters('PilotServerName'), '3')]",
```

Terraform:
```hcl
name = "${var.PilotServerName}3"
```

Terraform code (HCL) is easy to learn and easy to read. It is also 50-70% more compact than an equivalent JSON configuration.

---
Name: Why-Terraform
Why Terraform?
-------------------------
![:scale 100%](images/azure-loves-terraform.png)

---
Name: Why-Terraform
Why Terraform?
-------------------------

.contents[
* Supports multi-cloud & hybrid infrastructure
]

---
Name: Why-Terraform
Why Terraform?
-------------------------

.contents[
* Supports multi-cloud & hybrid infrastructure
* Migrate from other cloud providers
]

---
Name: Why-Terraform
Why Terraform?
-------------------------

.contents[
* Supports multi-cloud & hybrid infrastructure
* Migrate from other cloud providers
* Increase provisioning speed
]

---
Name: Why-Terraform
Why Terraform?
-------------------------

.contents[
* Supports multi-cloud & hybrid infrastructure
* Migrate from other cloud providers
* Increase provisioning speed
* Improve efficiency
]

---
Name: Why-Terraform
Why Terraform?
-------------------------

.contents[
* Supports multi-cloud & hybrid infrastructure
* Migrate from other cloud providers
* Increase provisioning speed
* Improve efficiency
* Reduce risk
]

---
Name: Why-Terraform
Why Terraform?
-------------------------

.contents[
* Supports multi-cloud & hybrid infrastructure
* Migrate from other cloud providers
* Increase provisioning speed
* Improve efficiency
* Reduce risk
]

---
name: Live-Demo
class: center,middle
Live Demo
=========================
???
Live demo notes here

---
name: Chapter-1
class: center,middle
.section[
Chapter 1  
Set Up Your Workstation
]

---
name: workstation-setup-1
Log Onto Your Workstation
-------------------------

Your instructor will provide you with a workstation URL that looks like this:

.center[.h1[myworkstation01.centralus.cloudapp.azure.com]]

.center[![:scale 50%](images/rdp_login.png)]

Use Remote Desktop (RDP) to access your workstation. Your instructor will provide the username and password.

???
Note to the instructor - outbound access on TCP port 3389 is required for this to work. Always have someone at the client check that they can access a test workstation *before* you go on site. You don't want to show up for training and find out that RDP access is blocked from the network you're using.

RDP is installed by default on almost all Windows corporate PCs and laptops. If your students are on Mac they can download the official Microsoft RDP client from the app store.

---
name: workstation-setup-2
Run the setup.ps1 script
-------------------------

<br><br><br>
.center[![:scale 50%](images/run_setup.png)]

Right click on the file called 'setup' on your desktop and select 'Run with Powershell'. Type Y for Yes when it asks about changing your execution policy.

???
If anyone is curious what this powershell script does, it's disabling windows line endings for git clone, and installing the posh-git powershell extension. We may add more setup steps to this script as time goes by.

---
name: workstation-setup-3
Open Visual Studio Code
-------------------------
.center[![:scale 70%](images/set_colors_and_icons.png)]

Click the little gear icon in the lower left corner. You can adjust your Color Theme, File Icon Theme, and other settings such as Font Size. Choose a color theme and font size that are comfortable for you.

???
I like to demo this part for the students. My personal favorites are Dracula and vscode-icons. Be sure and reload if you add any new extensions or themes.

---
name: workstation-setup-3a
Warning Message
-------------------------
<br><br>
.center[![:scale 70%](images/renderer.png)]

If you see this warning message just select 'Yes'. Visual Studio Code works better with the DOM-based renderer on remote workstations.

---
name: workstation-setup-4
Install the Terraform Extension
-------------------------
.center[![:scale 70%](images/install_terraform_extension.png)]

Click the box shaped icon on the left side menu. This brings you to the Extensions Marketplace. Search for Terraform. Install the first one on the list. Click the 'Reload' button once it is done installing.

---
name: workstation-setup-5
Open the Integrated Terminal
-------------------------
.center[![:scale 70%](images/open_terminal.png)]

Open the integrated VSC terminal using the menu or keyboard shortcut. You'll be asked to choose a default shell the first time you do this. Select Powershell as your default shell. You can change this later in your settings if you wish.

---
name: workstation-setup-6
Clone the Training Repo
-------------------------
<br><br>
Run the following commands to clone the training repository from GitHub:

```powershell
cd ~/Desktop
git clone https://github.com/scarolan/azure-vault-terraform-workshop
cd azure-vault-terraform-workshop
```

Now reload your text editor in the current directory with the code command:

```powershell
code -r .
```

---
name: workstation-setup-7
Get to Know Visual Studio Code
-------------------------
.center[![:scale 70%](images/vsc_tour.png)]

* Left side: File browser, search, version control & more.
* Lower right: Integrated terminal. Run all commands here.
* Upper right: Open and edit multiple files in tabs.

---
name: workstation-setup-8
Explore the Repository
-------------------------
.center[![:scale 70%](images/terraform_config_files.png)]

Terraform configuration files always end in either a `.tf` or `.tfvars` extension. These files are marked with the purple Terraform icon if you are using the vscode-icons set.

???
This is a good time to explore the VSC text editor a bit. Show your students that you can do almost everything from within the editor. You can expand and collapse the file browser. Show what each icon on the left side of the GUI does. You can also point out that the terminal can easily be maximized or minimized. 

---
name: workstation-setup-10
Verify That Terraform is Installed
-------------------------
<br>
Run the terraform --version command:

```powershell
terraform --version
```

You should see the following output (version number may vary):

```powershell
PS> terraform --version
Terraform v0.11.11
```

---
name: chapter-1-review
Chapter 1 Review
-------------------------
.contents[
In this section we:
* Logged onto your workstation
* Configured Visual Studio Code
* Cloned the training git repository
* Opened VSC in the training folder
]

---
name: Chapter-2
class: center,middle
.section[
Chapter 2  
My First Terraform Code
]


---
name: workstation-setup-9
Run Terraform Init
-------------------------
<br>
Run the terraform init command in your Terminal:

```powershell
terraform init
```

You should see the following output:

```powershell
Terraform has been successfully initialized!

You may now begin working with Terraform. Try running "terraform plan" to see any changes that are required for your infrastructure. All Terraform commands should now work.

If you ever set or change modules or backend configuration for Terraform, rerun this command to reinitialize your working directory. If you forget, other commands will detect it and remind you to do so if necessary.
```

---
name: Chapter-3
class: center,middle
.section[
Chapter 3  
terraform plan, apply and destroy
]

---
name: Chapter-4
class: center,middle
.section[
Chapter 4  
Organize Your Infrastructure Code
]

---
name: Chapter-5
class: center,middle
.section[
Chapter 5  
Provision and Configure Azure VMs
]

---
name: Chapter-6
class: center,middle
.section[
Chapter 6  
Manage and Change Infrastructure State
]

---
name: Chapter-7
class: center,middle
.section[
Chapter 7  
Terraform Enterprise - Built for Teams and Organizations
]

    </textarea>
    <script src="https://remarkjs.com/downloads/remark-latest.min.js" type="text/javascript"></script>
    <script src="./remark_settings.js" type="text/javascript"></script>
  </body>
</html>